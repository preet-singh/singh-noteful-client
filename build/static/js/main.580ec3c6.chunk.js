(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},204:function(e,t,n){},206:function(e,t,n){},208:function(e,t,n){},210:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(75),c=n.n(r),l=n(18),i=n(19),s=n(216),d=(n(88),n(90),n(37)),u=n(38),m=n(3),f=n(4),h=n(6),p=n(5),N=n(7),v=n(213),E=n(99),b=n(8),j=n(215),y=n(78),O=n(79);n(94);function g(e){e.tag,e.className,e.childrenm;var t=Object(O.a)(e,["tag","className","childrenm"]);return o.a.createElement(e.tag,Object(y.a)({className:["NavCircleButton",e.className].join(" ")},t),e.children)}g.defaultProps={tag:"a"};var _=o.a.createContext({notes:[],folders:[],addFolder:function(){},addNote:function(){},deleteNote:function(){}}),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===Number(t)})},P=(n(96),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.context,t=e.folders,n=void 0===t?[]:t,a=e.notes,r=void 0===a?[]:a;return o.a.createElement("div",{className:"NoteListNav"},o.a.createElement("ul",{className:"NoteListNav__list"},n.map(function(e){return o.a.createElement("li",{key:Number(e.id)},o.a.createElement(j.a,{className:"NoteListNav__folder-link",to:"/folder/".concat(e.id)},o.a.createElement("span",{className:"NoteListNav__num-notes"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){return e.folder_id===t}).length}(r,e.id)),e.folder_name))})),o.a.createElement("div",{className:"NoteListNav__button-wrapper"},o.a.createElement(g,{tag:E.a,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button"},o.a.createElement(b.a,{icon:"plus"}),o.a.createElement("br",null),"Folder")))}}]),t}(o.a.Component));P.contextType=_;n(100);var F=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.context,n=t.notes,a=t.folders,r=this.props.match.params.noteId,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===Number(t)})}(a,(k(n,r)||{}).folder_id);return o.a.createElement("div",{className:"NotePageNav"},o.a.createElement(g,{tag:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"NotePageNav__back-button"},o.a.createElement(b.a,{icon:"chevron-left"}),o.a.createElement("br",null),"Back"),c&&o.a.createElement("h3",{className:"NotePageNav__folder-name"},c.folder_name))}}]),t}(o.a.Component);F.defaultProps={history:{goBack:function(){}},match:{params:{}}},F.contextType=_;var C=n(77),D={API_ENDPOINT:"https://whispering-badlands-11039.herokuapp.com/api"},I=(n(204),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleClickDelete=function(e){e.preventDefault();var t=n.props.id;fetch("".concat(D.API_ENDPOINT,"/notes/").concat(t),{method:"DELETE",headers:{"content-type":"application/json"}}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.deleteNote(t),n.props.onDeleteNote(t)}).catch(function(e){console.error({error:e})})},n}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.id,a=e.modified;return o.a.createElement("div",{className:"Note"},o.a.createElement("h2",{className:"Note__title"},o.a.createElement(E.a,{to:"/note/".concat(n)},t)),o.a.createElement("button",{className:"Note__delete",type:"button",onClick:this.handleClickDelete},o.a.createElement(b.a,{icon:"trash-alt"})," ","remove"),o.a.createElement("div",{className:"Note__dates"},o.a.createElement("div",{className:"Note__dates-modified"},"Modified"," ",o.a.createElement("span",{className:"Date"},Object(C.format)(a,"Do MMM YYYY")))))}}]),t}(o.a.Component));I.defaultProps={onDeleteNote:function(){}},I.contextType=_;n(206);var S=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.match.params.folderId,t=this.context.notes,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter(function(e){return e.folder_id===Number(t)}):e}(void 0===t?[]:t,e);return o.a.createElement("section",{className:"NoteListMain"},o.a.createElement("ul",null,n.map(function(e){return o.a.createElement("li",{key:Number(e.id)},o.a.createElement(I,{id:e.id,name:e.note_name,modified:Date(e.date_modified).toString()}))})),o.a.createElement("div",{className:"NoteListMain__button-container"},o.a.createElement(g,{tag:E.a,to:"/add-note",type:"button",className:"NoteListMain__add-note-button"},o.a.createElement(b.a,{icon:"plus"}),o.a.createElement("br",null),"Note")))}}]),t}(o.a.Component);S.defaultProps={match:{params:{}}},S.contextType=_;n(208);var w=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleDeleteNote=function(e){n.props.history.push("/")},n}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.context.notes,t=void 0===e?[]:e,n=this.props.match.params.noteId,a=k(t,n)||{note_content:""};return o.a.createElement("section",{className:"NotePageMain"},o.a.createElement(I,{id:a.id,name:a.note_name,modified:Date(a.date_modified).toString(),onDeleteNote:this.handleDeleteNote}),o.a.createElement("div",{className:"NotePageMain__content"},a.note_content.split(/\n \r|\n/).map(function(e,t){return o.a.createElement("p",{key:t},e)})))}}]),t}(o.a.Component);w.defaultProps={match:{params:{}}},w.contextType=_;var x=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={name:""},n.handleAddFolder=function(e){e.preventDefault();var t={folder_name:n.state.name};fetch("".concat(D.API_ENDPOINT,"/folders"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.addFolder(t),n.props.history.push("/")}).catch(function(e){console.error({error:e})})},n.getFolderName=function(e){n.setState({name:e.target.value})},n.validateFolderName=function(){return n.state.name?null:"Folder name is required"},n}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("form",{className:"addNoteOrFolder",onSubmit:function(t){return e.handleAddFolder(t)}},o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"folderName"},"New Folder Name: "),o.a.createElement("input",{type:"text",id:"folderName",value:this.state.name,onChange:this.getFolderName}),this.validateFolderName&&o.a.createElement("p",{className:"validationElement"},this.validateFolderName()),o.a.createElement("button",{disabled:this.validateFolderName(),type:"submit"},"Submit")))}}]),t}(a.Component);x.contextType=_;var A=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",content:"",folderId:"",modified:""},n.handleAddNote=function(e){e.preventDefault();var t={note_name:n.state.name,date_modified:n.state.modified,note_content:n.state.content,folder_id:n.state.folderId};fetch("".concat(D.API_ENDPOINT,"/notes"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.addNote(t),n.props.history.push("/")}).catch(function(e){alert({error:e})})},n.getNoteName=function(e){n.setState({name:e.target.value})},n.getNoteContent=function(e){n.setState({content:e.target.value})},n.getNoteModified=function(e){n.setState({modified:(new Date).toLocaleString()})},n.getNoteFolderId=function(e){n.setState({folderId:e.target.value})},n.validateNoteName=function(){return n.state.name?null:"Note name is required"},n.validateContent=function(){return n.state.content?null:"Note content is required"},n.validateFolder=function(){return n.state.folderId?null:"Note content is required"},n}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.context.folders;return o.a.createElement("form",{className:"addNoteOrFolder",onSubmit:function(t){return e.handleAddNote(t)}},o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"noteName"},"New Note Name: "),o.a.createElement("input",{type:"text",id:"noteName",value:this.state.name,onChange:this.getNoteName}),this.validateNoteName&&o.a.createElement("p",{className:"validationElement"},this.validateNoteName())),o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"noteContent"},"Content: "),o.a.createElement("input",{type:"text",id:"noteName",value:this.state.content,onChange:this.getNoteContent}),this.validateContent&&o.a.createElement("p",{className:"validationElement"},this.validateContent())),o.a.createElement("div",null,o.a.createElement("select",{name:"Choose folder...",value:this.state.folderId,onChange:this.getNoteFolderId},o.a.createElement("option",{key:"default",value:null},"Select folder"),t.map(function(e){return o.a.createElement("option",{key:Number(e.id),value:e.id},e.folder_name)})),this.validateFolder&&o.a.createElement("p",{className:"validationElement"},this.validateFolder())),o.a.createElement("div",null,o.a.createElement("button",{disabled:this.validateNoteName()||this.validateContent()||this.validateFolder(),type:"submit",onClick:this.getNoteModified},"Submit")))}}]),t}(a.Component);A.contextType=_;var T=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={error:null},n}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return this.state.error?o.a.createElement("main",{className:"error-page"},o.a.createElement("h1",null,"Something seems to have gone wrong"),o.a.createElement("p",null,"Try refreshing the page")):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),t}(a.Component),M=(n(210),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={notes:[],folders:[]},n.handleDeleteNote=function(e){n.setState({notes:n.state.notes.filter(function(t){return t.id!==e})})},n.addNewFolder=function(e){n.setState({folders:[].concat(Object(u.a)(n.state.folders),[e])},n.componentDidMount())},n.addNewNote=function(e){n.setState({notes:[].concat(Object(u.a)(n.state.notes),[e])},n.componentDidMount())},n}return Object(N.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(D.API_ENDPOINT,"/notes")),fetch("".concat(D.API_ENDPOINT,"/folders"))]).then(function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return n.ok?a.ok?Promise.all([n.json(),a.json()]):a.json().then(function(e){return Promise.reject(e)}):n.json().then(function(e){return Promise.reject(e)})}).then(function(t){var n=Object(d.a)(t,2),a=n[0],o=n[1];e.setState({notes:a,folders:o})}).catch(function(e){console.error({error:e})})}},{key:"renderNavRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(v.a,{exact:!0,key:e,path:e,component:P})}),o.a.createElement(v.a,{path:"/note/:noteId",component:F}),o.a.createElement(v.a,{path:"/add-folder",component:F}),o.a.createElement(v.a,{path:"/add-note",component:F}))}},{key:"renderMainRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(v.a,{exact:!0,key:e,path:e,component:S})}),o.a.createElement(v.a,{path:"/note/:noteId",component:w}),o.a.createElement(v.a,{path:"/add-folder",component:x}),o.a.createElement(v.a,{path:"/add-note",component:A}))}},{key:"render",value:function(){var e={notes:this.state.notes,folders:this.state.folders,deleteNote:this.handleDeleteNote,addFolder:this.addNewFolder,addNote:this.addNewNote};return o.a.createElement(_.Provider,{value:e},o.a.createElement("div",{className:"App"},o.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),o.a.createElement("header",{className:"App__header"},o.a.createElement("h1",null,o.a.createElement(E.a,{to:"/"},"Noteful")," ",o.a.createElement(b.a,{icon:"check-double"}))),o.a.createElement(T,null,o.a.createElement("main",{className:"App__main"},this.renderMainRoutes()))))}}]),t}(a.Component));l.b.add(i.c,i.b,i.d,i.a),c.a.render(o.a.createElement(s.a,null,o.a.createElement(M,null)),document.getElementById("root"))},80:function(e,t,n){e.exports=n(212)},90:function(e,t,n){},94:function(e,t,n){},96:function(e,t,n){}},[[80,2,1]]]);
//# sourceMappingURL=main.580ec3c6.chunk.js.map